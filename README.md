# Проект YaMDb API
## Авторы:

[anthony-bogi](https://github.com/anthony-bogi)

[torgov1](https://github.com/torgov1)

[Sarugot](https://github.com/Sarugot)


## Описание:
### Проект YaMDb API

Проект YaMDb собирает отзывы пользователей на различные произведения.


## Технологии

Python 3.7

Django 3.2


## Установка и запуск проекта:

Клонировать репозиторий и перейти в него в командной строке:

```
git clone git@github.com:anthony-bogi/api_yamdb.git
```

```
cd api_yamdb
```

Cоздать и активировать виртуальное окружение (используйте команды "py" или "python"):

```
py -3.7 -m venv venv
```

```
source venv/Scripts/activate
```

Установить зависимости из файла requirements.txt:

```
py -m pip install --upgrade pip
```

```
pip install -r requirements.txt
```

Выполнить миграции:

```
cd api_yamdb/
```

```
py manage.py migrate
```

Выполнить загрузку информации в базу данных:

```
py manage.py fill_database
```

Запустить проект:

```
py manage.py runserver
```

>Когда вы запустите проект, по адресу http://127.0.0.1:8000/redoc/ будет доступна документация для API YaMDb, в которой описано, как работает API.


## Алгоритм регистрации пользователей

1. Пользователь отправляет POST-запрос на добавление нового пользователя с параметрами ```email``` и ```username``` на эндпоинт ```/api/v1/auth/signup/```.
2. YaMDB отправляет письмо с кодом подтверждения ```(confirmation_code)``` на адрес ```email```.
3. Пользователь отправляет POST-запрос с параметрами ```username``` и ```confirmation_code``` на эндпоинт ```/api/v1/auth/token/```, в ответе на запрос ему приходит ```token``` (JWT-токен).
4. При желании пользователь отправляет PATCH-запрос на эндпоинт ```/api/v1/users/me/``` и заполняет поля в своём профайле (описание полей — в документации).

## Пользовательские роли

* Аноним — может просматривать описания произведений, читать отзывы и комментарии.
* Аутентифицированный пользователь (```user```) — может, как и Аноним, читать всё, дополнительно он может публиковать отзывы и ставить оценку произведениям (фильмам/книгам/песенкам), может комментировать чужие отзывы; может редактировать и удалять свои отзывы и комментарии. Эта роль присваивается по умолчанию каждому новому пользователю.
* Модератор (```moderator```) — те же права, что и у Аутентифицированного пользователя плюс право удалять любые отзывы и комментарии.
* Администратор (```admin```) — полные права на управление всем контентом проекта. Может создавать и удалять произведения, категории и жанры. Может назначать роли пользователям.
* Суперюзер Django — обладет правами администратора (```admin```)


## Примеры запросов

Регистрация нового пользователя:
```
http://127.0.0.1:8000/api/v1/auth/signup/
```
```
{
  "email": "string",
  "username": "string"
}
```

Получение JWT-токена:
```
http://127.0.0.1:8000/api/v1/auth/token/
```
```
{
  "username": "string",
  "confirmation_code": "string"
}
```

> Токен необходимо передавать в заголовке каждого запроса, в поле Authorization. Перед самим токеном должно стоять ключевое слово Bearer и пробел.

* Основные эндпоинты API

Get-запросы

Получение списка всех категорий:
```
http://127.0.0.1:8000/api/v1/categories/
```

Получение списка всех жанров:
```
http://127.0.0.1:8000/api/v1/genres/
```

Получение списка всех произведений:
```
http://127.0.0.1:8000/api/v1/titles/
```

Получение списка всех отзывов:
```
http://127.0.0.1:8000/api/v1/titles/{title_id}/reviews/
```
> "title_id": integer - ID произведения

Получение списка всех комментариев к отзыву:
```
http://127.0.0.1:8000/api/v1/titles/{title_id}/reviews/{review_id}/comments/
```
> "title_id": integer - ID произведения

> "review_id": integer - ID отзыва

Пример POST запроса добавления новой категории на (http://127.0.0.1:8000/api/v1/categories/):
```
{
  "name": "string",
  "slug": "string"
}
```

## Требования:
```
asgiref==3.6.0
atomicwrites==1.4.1
attrs==22.2.0
certifi==2022.12.7
charset-normalizer==2.0.12
colorama==0.4.6
Django==3.2
django-filter==22.1
djangorestframework==3.12.4
djangorestframework-simplejwt==5.2.2
idna==3.4
importlib-metadata==4.2.0
iniconfig==2.0.0
packaging==23.0
pluggy==0.13.1
py==1.11.0
PyJWT==2.1.0
pytest==6.2.4
pytest-django==4.4.0
pytest-pythonpath==0.7.3
python-dotenv==0.21.1
pytz==2022.7.1
requests==2.26.0
sqlparse==0.4.3
toml==0.10.2
typing_extensions==4.5.0
urllib3==1.26.14
zipp==3.13.0
```
